# Test generated by RoostGPT for test credential-wallet-api-akshat using AI Type Vertex AI and AI Model code-bison-32k


# RoostTestHash=ed8c1b7bff

# Artillery test script for non-success API responses

config:
  target: {{ $processEnvironment.API_HOST }}
  expect: true
  payload:
    file: authorizations_post_others.csv
    skipHeader: true

scenarios:
  - scenario: Failure-Inducing Requests
    flow:
      - log:
          message: Attempting authorization with invalid email format in payload
          level: info
      - post:
          url: /authorizations
          method: POST
          payload:
            email: invalid_email
          headers:
            Token: {{$processEnvironment.AUTH_TOKEN}}
          expect:
            - statusCode: 400
            - hasHeader: api-version
            - contentType: application/json
            - hasProperty: description
            - hasProperty: error
            - notHasProperty: schema_field
            - notHasProperty: value
            - notHasProperty: field
      - think: 500ms
      - log:
          message: Attempting authorization without providing email in payload
          level: info
      - post:
          url: /authorizations
          method: POST
          payload:
            name: John Doe
          headers:
            Token: {{$processEnvironment.AUTH_TOKEN}}
          expect:
            - statusCode: 400
            - hasHeader: api-version
            - contentType: application/json
            - hasProperty: description
            - hasProperty: error
            - hasProperty: schema_field
            - notHasProperty: value
            - notHasProperty: field
      - think: 500ms
      - log:
          message: Attempting authorization with an invalid URL
          level: info
      - get:
          url: /authorizations/invalid
          headers:
            Token: {{$processEnvironment.AUTH_TOKEN}}
          expect:
            - notStatusCode: 200
            - hasHeader: api-version
            - contentType: application/json
            - hasProperty: description
            - hasProperty: error
            - notHasProperty: schema_field
            - notHasProperty: value
            - notHasProperty: field
