# Test generated by RoostGPT for test credential-wallet-api-akshat using AI Type Vertex AI and AI Model code-bison-32k


# RoostTestHash=b4614c0581

---
config:
  target: {{ $processEnvironment.API_HOST }}
  expect: true
  securitySchemes:
    ApiKeyAuth:
      type: 'apiKey'
      name: 'Token'
      in: 'header'
  payload:
    csv: persons_post_others.csv
    skipHeader: true
scenarios:
  - scenario: Failure Cases
    flow:
      - log: Requesting persons with invalid payload
      - post:
          url: /recipients/persons
          headers:
            Token: {{$processEnvironment.AUTH_TOKEN}}
          payload:
            invalid: payload
          expect:
            statusCode: 400
            contentType: application/json
            hasHeader: api-version
            hasProperty: error
            hasProperty: description
            notStatusCode:
              - 200
              - 201
      - think: 500
      - log: Requesting persons with missing required field
      - post:
          url: /recipients/persons
          headers:
            Token: {{$processEnvironment.AUTH_TOKEN}}
          payload:
            firstName: John
            lastName: Doe
          expect:
            statusCode: 400
            contentType: application/json
            hasHeader: api-version
            hasProperty: error
            hasProperty: description
            notStatusCode:
              - 200
              - 201
      - think: 500
      - log: Requesting persons with invalid email
      - post:
          url: /recipients/persons
          headers:
            Token: {{$processEnvironment.AUTH_TOKEN}}
          payload:
            firstName: John
            lastName: Doe
            email: invalid@email
          expect:
            statusCode: 400
            contentType: application/json
            hasHeader: api-version
            hasProperty: error
            hasProperty: description
            notStatusCode:
              - 200
              - 201
      - think: 500
      - log: Requesting persons with invalid birthDate
      - post:
          url: /recipients/persons
          headers:
            Token: {{$processEnvironment.AUTH_TOKEN}}
          payload:
            firstName: John
            lastName: Doe
            birthDate: 2023-02-29
          expect:
            statusCode: 400
            contentType: application/json
            hasHeader: api-version
            hasProperty: error
            hasProperty: description
            notStatusCode:
              - 200
              - 201
      - think: 500
      - log: Requesting persons with empty initials
      - post:
          url: /recipients/persons
          headers:
            Token: {{$processEnvironment.AUTH_TOKEN}}
          payload:
            firstName: John
            lastName: Doe
            initials:
          expect:
            statusCode: 400
            contentType: application/json
            hasHeader: api-version
            hasProperty: error
            hasProperty: description
            notStatusCode:
              - 200
              - 201
      - think: 500
      - log: Requesting persons with invalid initials
      - post:
          url: /recipients/persons
          headers:
            Token: {{$processEnvironment.AUTH_TOKEN}}
          payload:
            firstName: John
            lastName: Doe
            initials: J
          expect:
            statusCode: 400
            contentType: application/json
            hasHeader: api-version
            hasProperty: error
            hasProperty: description
            notStatusCode:
              - 200
              - 201
      - think: 500
      - log: Requesting persons with invalid URL
      - post:
          url: /recipients/persons/invalid
          headers:
            Token: {{$processEnvironment.AUTH_TOKEN}}
          payload:
            firstName: John
            lastName: Doe
          expect:
            statusCode: 404
            contentType: application/json
            hasHeader: api-version
            hasProperty: error
            hasProperty: description
            notStatusCode:
              - 200
              - 201
