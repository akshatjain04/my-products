# Test generated by RoostGPT for test credential-wallet-api-akshat using AI Type Vertex AI and AI Model code-bison-32k


# RoostTestHash=e0cf5b2e0e

---
config:
  target: {{ $processEnvironment.API_HOST }}
  expect:
    threshold: 99

scenarios:
  - scenario: Non-Success API Responses
    flow:
      - log: 'Logging in with invalid OTP...'
        post:
          url: /login
          payload:
            client: {{ $csvData.client }}
            email: {{ $csvData.email }}
            otp: '{{ "invalid_otp" }}'
          headers:
            ApiKeyAuth: {{ $processEnvironment.AUTH_TOKEN }}
          expect:
            statusCode: 400
            contentType: application/json
            hasHeader: Api-Version
            headerEquals: Api-Version: 1.0.0
            hasProperty: error
            hasProperty: description
            equals:
              error: validation/otp-pattern
            matchesRegexp:
              description: Descriptive Error Message

      - think: 500

      - log: 'Logging in with invalid email...'
        post:
          url: /login
          payload:
            client: {{ $csvData.client }}
            email: '{{ "invalid_email@example.com" }}'
            otp: {{ $csvData.otp }}
          headers:
            ApiKeyAuth: {{ $processEnvironment.AUTH_TOKEN }}
          expect:
            statusCode: 400
            contentType: application/json
            hasHeader: Api-Version
            headerEquals: Api-Version: 1.0.0
            hasProperty: error
            hasProperty: description
            equals:
              error: validation/email-pattern
            matchesRegexp:
              description: Descriptive Error Message

      - think: 500

      - log: 'Logging in with invalid client...'
        post:
          url: /login
          payload:
            client: '{{ "invalid_client" }}'
            email: {{ $csvData.email }}
            otp: {{ $csvData.otp }}
          headers:
            ApiKeyAuth: {{ $processEnvironment.AUTH_TOKEN }}
          expect:
            statusCode: 400
            contentType: application/json
            hasHeader: Api-Version
            headerEquals: Api-Version: 1.0.0
            hasProperty: error
            hasProperty: description
            equals:
              error: validation/client-pattern
            matchesRegexp:
              description: Descriptive Error Message

      - think: 500

      - log: 'Logging in with missing client...'
        post:
          url: /login
          payload:
            email: {{ $csvData.email }}
            otp: {{ $csvData.otp }}
          headers:
            ApiKeyAuth: {{ $processEnvironment.AUTH_TOKEN }}
          expect:
            statusCode: 400
            contentType: application/json
            hasHeader: Api-Version
            headerEquals: Api-Version: 1.0.0
            hasProperty: error
            hasProperty: description
            equals:
              error: validation/client-required
            matchesRegexp:
              description: Descriptive Error Message

      - think: 500

      - log: 'Logging in with missing email...'
        post:
          url: /login
          payload:
            client: {{ $csvData.client }}
            otp: {{ $csvData.otp }}
          headers:
            ApiKeyAuth: {{ $processEnvironment.AUTH_TOKEN }}
          expect:
            statusCode: 400
            contentType: application/json
            hasHeader: Api-Version
            headerEquals: Api-Version: 1.0.0
            hasProperty: error
            hasProperty: description
            equals:
              error: validation/email-required
            matchesRegexp:
              description: Descriptive Error Message

      - think: 500

      - log: 'Logging in with missing OTP...'
        post:
          url: /login
          payload:
            client: {{ $csvData.client }}
            email: {{ $csvData.email }}
          headers:
            ApiKeyAuth: {{ $processEnvironment.AUTH_TOKEN }}
          expect:
            statusCode: 400
            contentType: application/json
            hasHeader: Api-Version
            headerEquals: Api-Version: 1.0.0
            hasProperty: error
            hasProperty: description
            equals:
              error: validation/otp-required
            matchesRegexp:
              description: Descriptive Error Message

      - think: 500

      - log: 'Logging in with invalid URL...'
        post:
          url: https://example.com/login
          payload:
            client: {{ $csvData.client }}
            email: {{ $csvData.email }}
            otp: {{ $csvData.otp }}
          headers:
            ApiKeyAuth: {{ $processEnvironment.AUTH_TOKEN }}
          expect:
            statusCode: 404
            contentType: application/json
            hasHeader: Api-Version
            headerEquals: Api-Version: 1.0.0
            hasProperty: error
            hasProperty: description
            equals:
              error: resource/not-found
            matchesRegexp:
              description: Descriptive Error Message
