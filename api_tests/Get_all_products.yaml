# Test generated by RoostGPT for test MiniProjects using AI Type Open AI and AI Model gpt-4-1106-preview


config:
  target: '{{ROOST_SERVER_URL}}/api'
  phases:
    - duration: 60
      arrivalRate: 1
  defaults:
    headers:
      Content-Type: 'application/json'

scenarios:
  - name: "Get all products"
    flow:
      - get:
          url: "/products"
          capture:
            json: "$.products"
            as: "productList"
      - function: "assertEmptyProductList"

js:
  |
  function assertEmptyProductList(requestParams, response, context, ee, next) {
    if (response.statusCode === 200) {
      if (context.vars.productList.length === 0) {
        console.log('Success: The list of products is empty as expected.');
      } else {
        console.error('Error: The list of products is not empty.');
      }
    } else {
      console.error('Error: Received unexpected status code:', response.statusCode);
    }
    return next();
  }
