/*
Test generated by RoostGPT for test MiniProjects using AI Type Azure Open AI and AI Model roost-gpt4-32k

{
  background: null,
  rule: null,
  scenario: 'Find pet by status","    Given the API running at http://petstore.swagger.io/v2","    And an endpoint of http://petstore.swagger.io/v2/pet/findByStatus","    When a GET request is made","    And the status parameter is test","    And the Accepts header is application/json","    Then a 200 response is returned within 50ms","","',
  title: 'Find pet by status","    Given the API running at http://petstore.swagger.io/v2","    And an endpoint of http://petstore.swagger.io/v2/pet/findByStatus","    When a GET request is made","    And the status parameter is test","    And the Accepts header is application/json","    Then a 200 response is returned within 50ms","","'
}

*/
package com.bootexample4.RoostTest;

import io.restassured.RestAssured;
import io.restassured.response.Response;
import io.restassured.specification.RequestSpecification;
import org.testng.Assert;
import org.testng.annotations.BeforeClass;
import org.testng.annotations.DataProvider;
import org.testng.annotations.Test;
import java.io.BufferedReader;
import java.io.FileReader;
import java.util.ArrayList;
import java.util.List;

public class scenario0Test {

    public static final int RESPONSE_STATUS_CODE_200 = 200;
    public static final String BASE_URL = System.getenv("API_HOST");

    @Test(dataProvider = "loadTestData")
    public void getPetByStatus(String method, String url, String headers, String reqBody, String expectedResCode, String expectedResBody){

        RequestSpecification httpRequest = RestAssured.given().header("Accepts", "application/json");
        Response response = httpRequest.get(BASE_URL+url);

        // Assertion
        int actualStatusCode = response.getStatusCode();
        Assert.assertEquals(actualStatusCode, Integer.parseInt(expectedResCode));
    }

    @DataProvider
    public Object[][] loadTestData() throws Exception {
        String fileName = "src\\test\\java\\com\\bootexample4\\RoostTest\\scenario0Test.csv";
        BufferedReader br = new BufferedReader(new FileReader(fileName));
        List<String[]> list = new ArrayList<>();
        br.readLine(); //to skip headers
        String line;
        while ((line = br.readLine()) != null) {
            list.add(line.split("\\^\\|\\^", -1));
        }
        br.close();
        Object[][] data= list.toArray(new Object[list.size()][]);
        return data;
    }
}
