# ********RoostGPT********

# Test generated by RoostGPT for test MiniProjects using AI Type Azure Open AI and AI Model roostgpt-4-32k
# 
# Feature file generated for /pet/{petId}/uploadImage_post for http method type POST 
# RoostTestHash=241042a9ea
# 
# 

# ********RoostGPT********
Feature: Upload an image to a pet using the /v2/pet/{petId}/uploadImage API

  Background:
    * def urlBase = karate.properties['URL_BASE']
    * url urlBase

  Scenario Outline: Upload image successfully with valid inputs
    Given path 'v2', 'pet', <petId>, 'uploadImage'
    And param additionalMetadata = <additionalMetadata>
    And multipart file file = read('<filePath>')
    And configure headers = { Authorization: karate.properties['AUTH_TOKEN'] } # Using OAuth2
    When method POST
    Then status 200
    And match response == '#object'
    And match response.code == '#number'
    And match response.type == '#string'
    And match response.message == '#string'

    Examples:
      | read('pet_petId_uploadImage_post.csv') |

  Scenario: Upload image with valid path parameter but missing file and metadata
    Given path 'v2', 'pet', 103, 'uploadImage'
    And configure headers = { Authorization: karate.properties['AUTH_TOKEN'] }
    When method POST
    Then status 200
    And match response == '#object'
    And match response.code == '#number'
    And match response.type == '#string'
    And match response.message == '#string'

  Scenario: Attempt upload with missing petId
    Given path 'v2', 'pet', 'uploadImage'
    And param additionalMetadata = 'Invalid action'
    And multipart file file = read('classpath:invalid.jpg')
    And configure headers = { Authorization: karate.properties['AUTH_TOKEN'] }
    When method POST
    Then status 404

  Scenario Outline: Upload image with invalid/malformed inputs
    Given path 'v2', 'pet', <petId>, 'uploadImage'
    And param additionalMetadata = <additionalMetadata>
    And multipart file file = read('<filePath>')
    And configure headers = { Authorization: karate.properties['AUTH_TOKEN'] }
    When method POST
    Then status 400

    Examples:
      | petId     | additionalMetadata   | filePath                |
      |        -1 | 'Invalid pet ID'     | 'classpath:invalid.jpg' |
      | 999999999 | 'Malformed metadata' | 'classpath:bigfile.png' |
