# ********RoostGPT********

# Test generated by RoostGPT for test MiniProjects using AI Type Azure Open AI and AI Model roostgpt-4-32k
# 
# Feature file generated for /pet/{petId}/uploadImage_post for http method type POST 
# RoostTestHash=8dac89cb33
# 
# 

# ********RoostGPT********
Feature: Test the /v2/pet/{petId}/uploadImage endpoint functionality

  Background:
    * def urlBase = karate.properties['PETSTORE_API_HOST']
    * url urlBase
    * configure headers = { Authorization: #(karate.properties['PETSTORE_AUTH_TOKEN']) }

  Scenario Outline: Upload an image for a pet
    Given path 'v2/pet/<petId>/uploadImage'
    And multipart field additionalMetadata = '''<additionalMetadata>'''
    And multipart file file = '''{ 
      read: <filePath>, 
      filename: <fileName>, 
      contentType: <contentType> 
    }'''
    When method POST
    Then status 200
    And match response == "#object"
    And match response.code == '#integer'
    And match response.type == '#string'
    And match response.message == '#string'

    Examples:
      | petId | additionalMetadata | filePath         | fileName    | contentType  |
      | 123   | Sample Metadata    | 'test-image.jpg' | 'image.jpg' | 'image/jpeg' |
      | 456   | Another Metadata   | 'test-file.png'  | 'file.png'  | 'image/png'  |
      | 789   | null               | 'empty.txt'      | 'empty.txt' | 'text/plain' |

  Scenario: Upload without file or metadata
    Given path 'v2/pet/123/uploadImage'
    When method POST
    Then status 200
    And match response == "#object"
    And match response.code == '#integer'
    And match response.type == '#string'
    And match response.message == '#string'

  Scenario: Missing mandatory petId in the path
    Given path 'v2/pet//uploadImage'
    When method POST
    Then status 404

  Scenario: Send unsupported content type file
    Given path 'v2/pet/123/uploadImage'
    And multipart file file = '''{ 
      read: 'test-file.exe', 
      filename: 'test.exe', 
      contentType: 'application/octet-stream' 
    }'''
    When method POST
    Then status 415

  Scenario: Invalid petId
    Given path 'v2/pet/invalidPetId/uploadImage'
    When method POST
    Then status 400
    And match response == "#object"
    And match response.code == '#integer'
    And match response.type == '#string'
    And match response.message == '#string'
